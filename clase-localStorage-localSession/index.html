<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario con localStorage</title>
  </head>
  <body>
    <h1>Ejercicio en clase</h1>

    <form id="form-datos-personales">
      <fieldset>
        <legend>Datos personales</legend>

        <p>
          <label for="nombre">Nombre:</label>
          <input
            type="text"
            id="nombre"
            name="nombre"
            placeholder="p. ej.: Samuel"
            required
          />
        </p>

        <p>
          <label for="edad">Edad:</label>
          <input
            type="number"
            id="edad"
            name="edad"
            placeholder="p. ej.: 21"
            required
          />
        </p>

        <p>
          <label for="dia-favorito">Día favorito:</label>
          <select id="dia-favorito" name="dia-favorito" required>
            <option value="">--Selecciona un día--</option>
            <option value="lunes">Lunes</option>
            <option value="martes">Martes</option>
            <option value="miércoles">Miércoles</option>
            <option value="jueves">Jueves</option>
            <option value="viernes">Viernes</option>
            <option value="sábado">Sábado</option>
            <option value="domingo">Domingo</option>
          </select>
        </p>
      </fieldset>

      <button type="submit">Guardar</button>
    </form>

    <div id="mensaje"></div>

    <script>
      const form = document.getElementById("form-datos-personales");
      const mensajeDiv = document.getElementById("mensaje");

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const nombre = document.getElementById("nombre").value;
        const edad = document.getElementById("edad").value;
        const diaFavorito = document.getElementById("dia-favorito").value;

        const datos = {
          nombre: nombre,
          edad: parseInt(edad),
          diaFavorito: diaFavorito,
        };

        // Guardardo en el localStorage el JSON
        localStorage.setItem("datosUsuario", JSON.stringify(datos));

        mostrarMensaje(datos);
        form.reset();
      });

      function mostrarMensaje(datos) {
        mensajeDiv.textContent = `Hola ${datos.nombre}, tienes ${datos.edad} años, tu día de la semana favorito es ${datos.diaFavorito}.`;
      }

      // hay info guardada?
      window.onload = function () {
        const datosGuardados = localStorage.getItem("datosUsuario");
        if (datosGuardados) {
          const datos = JSON.parse(datosGuardados);
          mostrarMensaje(datos);
        }
      };
    </script>
  </body>
</html>
